<div class="add-edit-ingredient-form">
    <mat-form-field appearance="outline">
        <mat-label>Ingredient name</mat-label>
        <input matInput [formControl]="ingredientForm.controls.name"/>
        @if(ingredientForm.get('name')?.hasError('required')) {
            <mat-error>Ingredient name is required</mat-error>
        }
    </mat-form-field>
    <mat-form-field appearance="outline">
        <mat-label>Category</mat-label>
        <mat-select [formControl]="ingredientForm.controls.category">
        @if((supportedCategories | async); as supportedCategories) {
            @for(category of supportedCategories; track category) {
                <mat-option [value]="category">{{category}}</mat-option>
            }
        }
        </mat-select>
        @if(ingredientForm.get('category')?.hasError('required')) {
            <mat-error>Ingredient category is required</mat-error>
        }
    </mat-form-field>
    <mat-form-field appearance="outline">
        <mat-label>Tags ( comma seperated )</mat-label>
        <textarea matInput [formControl]="ingredientForm.controls.tags"></textarea>
    </mat-form-field>
    @if((isAddOrEditLoading | async) ?? true) {
        <mat-spinner [diameter]="30"></mat-spinner>
    } @else { 
        <button 
            mat-flat-button 
            class="ingredient-add-button" 
            (click)="addEditIngredient()">
                {{ingredient() ? "Edit" : "Add"}} ingredient
        </button>
    }
</div>